
This directory contains the scripts and cfgs I'm using on my system.

The following table is an overview to all the programs I am using:

Function        | Program
----------------+--------------------------------------------------------------
                |
                | *** Husky ***
Tosser/Router   | HPT (works)
Tracker         | lxtrack
MailEditor      | MsgEd TE (works)
Ticker          | ProTick (works)
MkNL            | ProMkNL (works)
PutMsg          | MPost TE
EMail-Gate      | ProGate (works)
FileListGen     | ptflg (works)
FLD             | (GNU Diff)
                |
                | *** other ***
Mailer          | Modem/ISDN: mgetty+ifcico (works) / Binkley
                | TCP/IP: BinkD (works)
                | ISDN Crash-Mails: x77mail
VirScan         | McAffe for Linux?
RenamLog        | log-daemon, cron-job (works)
SendFax         | mgetty+sendfax
CallMon         | isdnlog (works)
Scheduler       | cron + SemAct (works)
                |
                | *** nothing yet ***
BBS             |
V7(+)-Compiler  |
FileBase-       |
 Maintenance    |
AutoPassive     |
Staging-Model   |
AutoRoute       |
Remove inactive/|
single-link     |
echos           |


I've installed the following tools that are needed for my setup but are not
Fido-related:

- arc
- lha
- tolower
- unace
- unarj
- unzip
- zip


The whole system is running as user fido, all non-sensitive files (i.e. that
contain not passwords or netmails) are world-readable (chmod 755 / 644).
Echomail areas are group-writable (chmod 664, group fido).
No program has the setuid/setgid bit set.

The permissions of /dev/tty{I*,S*} are set to 660, owner is fido.fido.

/etc/profile contains the following section:

=== Cut ===
export FIDOCONFIG=/husky/cfg/config
export PT=/husky/cfg
export PROGATE=/husky/cfg
export PMKNL=/husky/cfg
export MSGID=/husky/work
=== Cut ===


This is the directory structure:

- /husky
  - /husky/bin				Binaries (not scripts)
  - /husky/cfg				Configs
  - /husky/echo				Echomail areas
  - /husky/files			Filebase
    - /husky/files/bad			Bad TICs and associated files
    - /husky/files/magic		Used by ifcico for magic requests
    - /husky/files/old			Replaced files are put here by PT
    - /husky/files/passthrough		Passthrough-Files, do not put anything
					else here or it will be deleted!
  - /husky/filelist			Filelists
  - /husky/in				Insecure Inbound
    - /husky/in/fax			Incoming faxes
    - /husky/in/local			This inbound is not checked for
					passwords or addresses (useful for
                                        posting messages via PKT)
    - /husky/in/protect			Protected inbound
    - /husky/in/test			Unsecure Inbound, to be cloned
    - /husky/in/test/fax		Fax-Inbound, to be cloned
    - /husky/in/test/protect		Protected Inbound, to be cloned
    - /husky/in/test/tmp		Used by ifcico for storing files
					during receiption
    - /husky/in/test/protect/tmp	Dito
    - /husky/in/upd			UPD-Files are stored here for
					procession by ProMkNL
  - /husky/lib				Libs (fidoconfig, smapi, etc.)
  - /husky/log				Logfiles
  - /husky/netmail (chmod 750)		Primary Netmail area
  - /husky/nodelist			Nodelists
  - /husky/out
    - /husky/out/fax			Fax-Outbound
    - /husky/out/tic			TIC-Outbound
    - /husky/out/tmp			Temporary outbound, used for archiving
    - /husky/out/zone			Outbound for primary zone (Zone 2)
  - /husky/sbin (chown root.root)	SuperUser-only-Binaries (mgetty)
  - /husky/scripts			Scripts
  - /husky/src				Sources
  - /husky/work				Semaphore and working directory
    - /husky/work/dupes			Dupe-Database of HPT
    - /husky/work/pmknl                 ProMkNL working directory
      - /husky/work/pmknl/bad		Bad UPDs
      - /husky/work/pmknl/master	Copyrights, Prologs, Epilogs
      - /husky/work/pmknl/nodelist	Generated Nodelists/UPDs
      - /husky/work/pmknl/update	Checked UPDs used to generate
					nodelists/UPDs
    - /husky/work/pt			ProTick working directory
- /tmp/ifcico				used by ifcico for temporarily storing
					incoming filerequests

/husky/bin is in PATH (/etc/profile), /husky/lib is in /etc/ld.so.conf (run
ldconfig after editing that file)

Minicom has two configs, the default one is for ISDN and uses /dev/ttyI3
at 115200 with Init string "^M~ATZ^M~AT&E3012959^M~" (3012959 is the MSN I
use for the mailbox). "ttyS2" is for the (analog) modem and uses /dev/ttyS2
at 38400 with Init string "^M~ATZ^M~". Both setups set the BS (BackSpace) key
to BS, not to DEL.

mgetty is compiled with Fido- and AutoPPP-Support and has its Cfgs in
/etc/mgetty. /usr/local/bin/ppplogin is used for AutoPPP. The devices ttyS2,
ttyI0 and ttyI1 are handled. The issue file /husky/cfg/fido_issue contains
a small "Banner".

This are the entries in /etc/inittab:

=== Cut ===
S1:2345:respawn:/sbin/mgetty -i/husky/cfg/fido_issue /dev/ttyS1
I0:2345:respawn:/sbin/mgetty -i/husky/cfg/fido_issue /dev/ttyI0
I1:2345:respawn:/sbin/mgetty -i/husky/cfg/fido_issue /dev/ttyI1
=== Cut ===

/usr/local/bin/ppplogin uses /etc/ppp/options.ttyxx for assigning the remote
IPs

ifcico uses /husky/cfg/ifcico.cfg as config, which includes
/husky/cfg/ifcico.global.cfg and /husky/cfg/password.lst (chmod 640).
The devices ttyI4 and ttyS2 are used for dial-out.

/husky/cfg/tty.lst contains a list of all devices used by the fido subsystem
and their purpose.

/husky/cfg/group.lst lists all groups used in fidoconfig.

MsgEd has an own Cfg, but also uses fidoconfig for addresses, areas, etc.
I called it msged.cfg so you can see it, in real life it's called ".msged".
The same applies to msged.tpl (".msged.tpl") and msged.scheme ".msged.scheme".
.msged.hlp is a link to /husky/work/msghelp.dat, so I only need to upgrade
a single file when installing a new version of MsgEd.
Similarily .msged.readmaps and .msged.writmaps are links to
/husky/work/readmaps.dat and /husky/work/writmaps.dat, respectively.

PTFLG (a filelist generator using the protick config) is a script and needs
a bit of configuration, so it had better gone to /husky/scripts.

The whole fido subsystem is started at boot time and shut down on reboot/halt
with the script /etc/init.d/fido.

/husky/bin/mvhuskylog renames the logfiles at the end of every day to
<name>.<2 digit Year><2 digit Month><2 digit day>.

There are several entries in crontab:
  - /husky/bin/mvhuskylog at 23:59
  - /bin/touch: /husky/work/{maint.now, week.now, 14day.now, month.now}
  - /husky/scripts/poll: uplinks
  - /husky/scripts/request: request "FILES" from several nodes every month


/husky/cfg/stages.lst contains a new concept I might use in future.


The following subdirectories and files are contained in this package:

Directory		Original dir
scripts			/husky/scripts
cfg			/husky/cfg


File			Original file
msged.cfg		~/.msged
msged.tpl		~/.msged.tpl
msged.scheme		~/.msged.scheme


If there is anything missing that you need or if you have a questions/
suggestions/comment, do not hesitate to contact me.

Sascha Silbe, 2:2435/424
Sascha.Silbe@ldknet.org
http://www.ldknet.org/~ssilbe/
Handy (it's your phone bill :) ) 0170-4111488

Now have fun with all the programs from the Husky project! :)

